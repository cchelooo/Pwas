{"ast":null,"code":"import _objectSpread from\"C:/Users/msant/Documents/GitHub/Pwas/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{create}from\"zustand\";const useCartStore=create(set=>({products:[],cart:[],initializeProducts:productList=>{const initializedProducts=productList.map(product=>_objectSpread(_objectSpread({},product),{},{originalStock:product.stock// Guardamos el stock original\n}));set({products:initializedProducts});// Guardar en localStorage\nlocalStorage.setItem(\"products\",JSON.stringify(initializedProducts));},addToCart:(product,quantity)=>set(state=>{const updatedProducts=state.products.map(p=>p.id===product.id?_objectSpread(_objectSpread({},p),{},{stock:p.stock-quantity}):p);const existingProduct=state.cart.find(item=>item.id===product.id);const updatedCart=existingProduct?state.cart.map(item=>item.id===product.id?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+quantity}):item):[...state.cart,_objectSpread(_objectSpread({},product),{},{quantity})];localStorage.setItem(\"products\",JSON.stringify(updatedProducts));return{products:updatedProducts,cart:updatedCart};}),removeFromCart:(productId,quantity)=>set(state=>{const updatedProducts=state.products.map(p=>p.id===productId?_objectSpread(_objectSpread({},p),{},{stock:p.stock+quantity}):p);const updatedCart=state.cart.filter(item=>item.id!==productId);localStorage.setItem(\"products\",JSON.stringify(updatedProducts));return{products:updatedProducts,cart:updatedCart};}),clearCart:()=>set(state=>{const restoredProducts=state.products.map(p=>_objectSpread(_objectSpread({},p),{},{stock:p.originalStock// Restaurar el stock original\n}));localStorage.setItem(\"products\",JSON.stringify(restoredProducts));return{cart:[],products:restoredProducts};})}));export default useCartStore;","map":{"version":3,"names":["create","useCartStore","set","products","cart","initializeProducts","productList","initializedProducts","map","product","_objectSpread","originalStock","stock","localStorage","setItem","JSON","stringify","addToCart","quantity","state","updatedProducts","p","id","existingProduct","find","item","updatedCart","removeFromCart","productId","filter","clearCart","restoredProducts"],"sources":["C:/Users/msant/Documents/GitHub/Pwas/src/Store/CartStore.jsx"],"sourcesContent":["import { create } from \"zustand\";\r\n\r\nconst useCartStore = create((set) => ({\r\n  products: [],\r\n  cart: [],\r\n\r\n  initializeProducts: (productList) => {\r\n    const initializedProducts = productList.map((product) => ({\r\n      ...product,\r\n      originalStock: product.stock, // Guardamos el stock original\r\n    }));\r\n    set({ products: initializedProducts });\r\n\r\n    // Guardar en localStorage\r\n    localStorage.setItem(\"products\", JSON.stringify(initializedProducts));\r\n  },\r\n\r\n  addToCart: (product, quantity) =>\r\n    set((state) => {\r\n      const updatedProducts = state.products.map((p) =>\r\n        p.id === product.id\r\n          ? { ...p, stock: p.stock - quantity }\r\n          : p\r\n      );\r\n\r\n      const existingProduct = state.cart.find((item) => item.id === product.id);\r\n      const updatedCart = existingProduct\r\n        ? state.cart.map((item) =>\r\n            item.id === product.id\r\n              ? { ...item, quantity: item.quantity + quantity }\r\n              : item\r\n          )\r\n        : [...state.cart, { ...product, quantity }];\r\n\r\n      localStorage.setItem(\"products\", JSON.stringify(updatedProducts));\r\n      return { products: updatedProducts, cart: updatedCart };\r\n    }),\r\n\r\n  removeFromCart: (productId, quantity) =>\r\n    set((state) => {\r\n      const updatedProducts = state.products.map((p) =>\r\n        p.id === productId\r\n          ? { ...p, stock: p.stock + quantity }\r\n          : p\r\n      );\r\n\r\n      const updatedCart = state.cart.filter((item) => item.id !== productId);\r\n\r\n      localStorage.setItem(\"products\", JSON.stringify(updatedProducts));\r\n      return { products: updatedProducts, cart: updatedCart };\r\n    }),\r\n\r\n  clearCart: () =>\r\n    set((state) => {\r\n      const restoredProducts = state.products.map((p) => ({\r\n        ...p,\r\n        stock: p.originalStock, // Restaurar el stock original\r\n      }));\r\n\r\n      localStorage.setItem(\"products\", JSON.stringify(restoredProducts));\r\n      return { cart: [], products: restoredProducts };\r\n    }),\r\n}));\r\n\r\nexport default useCartStore;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}